# Pr√°ctica: Construyendo un Mini-Motor de Recomendaciones üé¨

En esta pr√°ctica, aplicaremos nuestros conocimientos sobre **Diccionarios** y **Conjuntos** para construir algo que usas todos los d√≠as: un sistema de recomendaci√≥n (como el de Netflix, Spotify o YouTube).

## Objetivos

- **Modelar** informaci√≥n compleja usando estructuras de datos anidadas (Diccionarios de Conjuntos).
- **Persistir** y recuperar informaci√≥n utilizando archivos **JSON** o **CSV**.
- **Aplicar** operaciones matem√°ticas de conjuntos (Intersecci√≥n, Uni√≥n, Diferencia) para resolver problemas de l√≥gica de negocio.
- **Implementar** el **√çndice de Jaccard**, una m√©trica fundamental en ciencia de datos para medir similitud.
- **Desarrollar** una funci√≥n que tome decisiones basadas en datos.

---

## Parte 1: El Problema üéØ

Imagina que has sido contratado por una nueva plataforma de streaming. Tu jefe te dice:

> "Necesitamos una forma de recomendar pel√≠culas a nuestros usuarios. La idea es simple: si a **Juan** le gustan las mismas pel√≠culas que a **Mar√≠a**, probablemente a Juan le gusten las pel√≠culas que Mar√≠a ha visto y √©l todav√≠a no."

Tu misi√≥n es escribir un programa en Python que automatice este razonamiento, leyendo los datos de preferencias desde un archivo externo.

---

## Parte 2: Los Datos (JSON) üíæ

En el mundo real, los datos no est√°n escritos directamente en el c√≥digo Python, sino en archivos o bases de datos. Para esta pr√°ctica, usaremos un archivo **JSON** para almacenar las preferencias de los usuarios.

El formato JSON es ideal porque se parece mucho a los diccionarios y listas de Python.

### Paso 1: Crear el archivo de datos

Crea un archivo llamado `peliculas.json` en la misma carpeta que tu cuaderno, con el siguiente contenido:

```json
{
    "Ana": ["El Padrino", "Matrix", "Pulp Fiction", "Interestelar"],
    "Beto": ["Matrix", "Star Wars", "El Se√±or de los Anillos", "Interestelar"],
    "Carla": ["Titanic", "El Diario de una Pasi√≥n", "Matrix"],
    "David": ["El Padrino", "Pulp Fiction", "Scarface", "Taxi Driver"],
    "Elena": ["Star Wars", "Interestelar", "El Se√±or de los Anillos", "Matrix"]
}
```

### Ejercicio 1: Cargar los datos üìÇ

Necesitamos una funci√≥n que lea este archivo y lo convierta en una estructura que podamos usar.
**Ojo:** JSON no tiene "conjuntos" (`set`), solo tiene "listas" (`[]`). Al cargar los datos, deber√°s convertir esas listas a conjuntos para poder hacer operaciones matem√°ticas con ellas.

Implementa la funci√≥n `cargar_base_de_datos(ruta_archivo)`:

```python
import json

def cargar_base_de_datos(ruta_archivo):
    # 1. Abrir el archivo en modo lectura
    # 2. Cargar el JSON a un diccionario
    # 3. Convertir las listas de pel√≠culas a conjuntos (sets)
    # 4. Devolver el diccionario procesado
    pass

# Prueba
base_de_datos = cargar_base_de_datos("peliculas.json")
print(base_de_datos)
# Deber√≠a imprimir algo como: {'Ana': {'Matrix', ...}, ...}
```

---

## Parte 3: Midiendo la Similitud (√çndice de Jaccard) üìè

Para encontrar al "alma gemela" cinematogr√°fica de un usuario, necesitamos ponerle un n√∫mero a qu√© tan parecidos son sus gustos. Usaremos el **√çndice de Jaccard**.

Dados dos conjuntos de pel√≠culas, $A$ (usuario 1) y $B$ (usuario 2), la similitud se calcula como:

$$ J(A, B) = \frac{|A \cap B|}{|A \cup B|} $$

En palabras simples:
$$ \text{Similitud} = \frac{\text{Pel√≠culas que AMBOS vieron}}{\text{Total de pel√≠culas √∫nicas entre los dos}} $$

- Si tienen exactamente los mismos gustos, $J = 1.0$ ($100\%$).
- Si no coinciden en nada, $J = 0.0$ ($0\%$).

### Ejercicio 2: Similitud de Jaccard

Implementa una funci√≥n `calcular_similitud(usuario1, usuario2)` que reciba dos conjuntos y devuelva su √≠ndice de Jaccard (un `float` entre 0 y 1).

*Pista: Recuerda que en Python la intersecci√≥n es `&` y la uni√≥n es `|`.*

---

## Parte 4: El Motor de Recomendaci√≥n ‚öôÔ∏è

Ahora vamos a armar la pieza central. Necesitamos una funci√≥n `recomendar_pelicula(usuario_objetivo, db)` que haga lo siguiente:

1. **Recorrer** a todos los dem√°s usuarios de la base de datos (¬°cuidado de no compararse consigo mismo!).
2. **Calcular** la similitud entre el `usuario_objetivo` y cada uno de los otros usuarios.
3. **Encontrar** al usuario con la mayor similitud (el "vecino m√°s cercano").
4. **Identificar** las pel√≠culas que vio ese vecino pero que el `usuario_objetivo` **NO** ha visto.
   - *Pista: Esto es una operaci√≥n de Diferencia de Conjuntos (`vecino - objetivo`).*
5. **Devolver** esas pel√≠culas como recomendaci√≥n.

### Ejercicio 3: El Recomendador

Implementa la funci√≥n y pru√©bala.

- ¬øQu√© le recomienda el sistema a **Ana**? (Deber√≠a ser alguien parecido a David).
- ¬øQu√© le recomienda a **Beto**? (Deber√≠a ser alguien parecido a Elena).

```python
def recomendar_pelicula(nombre, db):
    # Tu c√≥digo aqu√≠
    pass

# Prueba
print(recomendar_pelicula("Ana", base_de_datos))
```

### Ejercicio 4: Guardar Resultados üìù

Una vez que tenemos las recomendaciones, ser√≠a √∫til guardarlas en un archivo para envi√°rselas al usuario despu√©s.

Escribe una funci√≥n `guardar_recomendaciones(nombre_usuario, recomendaciones)` que cree un archivo de texto llamado `recomendaciones_{nombre_usuario}.txt` (por ejemplo: `recomendaciones_Ana.txt`).

El archivo debe tener un formato amigable, por ejemplo:

```text
Hola Ana,
Basado en tus gustos, te recomendamos ver:
- Pel√≠cula 1
- Pel√≠cula 2
```

*Pista: Usa `open()` con modo `'w'` y f-strings para escribir el contenido.*

---

## Parte 5: Reto Final - Tu Perfil üöÄ

1. Edita manualmente el archivo `peliculas.json` y agrega una entrada con **tu nombre** y una lista de 4 o 5 pel√≠culas que te gusten.
2. Vuelve a ejecutar tu funci√≥n `cargar_base_de_datos` para actualizar la variable `base_de_datos`.
3. Ejecuta `recomendar_pelicula` para ti mismo.
4. Ejecuta `guardar_recomendaciones` para generar tu archivo personalizado.
5. ¬øQui√©n es tu usuario m√°s af√≠n en esta base de datos? ¬øTe gusta la recomendaci√≥n que te dio?

---

## Reflexi√≥n (Discusi√≥n con LLM) ü§ñ

Preg√∫ntale a tu asistente de IA:

- *"¬øC√≥mo escalar√≠a este algoritmo si tuvi√©ramos 1 mill√≥n de usuarios? ¬øSer√≠a eficiente comparar a todos contra todos?"*
- *"¬øQu√© es el 'Filtrado Colaborativo' (Collaborative Filtering) y en qu√© se diferencia de lo que acabamos de programar?"*
