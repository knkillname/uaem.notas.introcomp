# PrÃ¡ctica 6: El Analizador de "El Chisme" ğŸ“±ğŸ’¬

En esta prÃ¡ctica combinaremos el poder de la **ProgramaciÃ³n Orientada a Objetos (POO)** con el **Manejo de Archivos** y **Expresiones Regulares** para analizar lo mÃ¡s sagrado de la comunicaciÃ³n moderna: un historial de chat de WhatsApp.

## Objetivos

- **DiseÃ±ar Clases** para modelar entidades reales (`Mensaje`, `Conversacion`).
- **Utilizar Regex** para *parsear* (analizar sintÃ¡cticamente) texto con formato complejo.
- **Leer y Escribir Archivos** para procesar datos y guardar reportes.
- **Aplicar LÃ³gica de Negocio** para extraer estadÃ­sticas interesantes.

---

## Parte 1: El Contexto ğŸµ

Te han pasado el archivo `_chat.txt` del grupo de la posada y hay debate sobre quiÃ©n fue el que mÃ¡s *spam* mandÃ³ o quiÃ©n es el que nunca contesta. Como buen programador, en lugar de contar a mano, harÃ¡s un script.

El formato de WhatsApp (en Android/iOS) suele verse asÃ­:

```text
[24/12/23, 8:00:00 p.m.] Sofi ğŸŒ¸: Oigan, Â¿a quÃ© hora llegan?
[24/12/23, 8:01:15 p.m.] El Kevin: Ya voy en camino, tranqui.
[24/12/23, 8:02:00 p.m.] Dani: Yo llevo los refrescos ğŸ¥¤
[24/12/23, 8:05:30 p.m.] Sofi ğŸŒ¸: Wey, pero que no sean de los baratos porfa
[24/12/23, 8:06:00 p.m.] El Kevin: <Multimedia omitido>
```

---

## Parte 2: Modelando el Problema (POO) ğŸ—ï¸

### Ejercicio 1: La Clase `Mensaje`

Define una clase que represente un Ãºnico mensaje. Debe tener:

- **Atributos**: `fecha`, `hora`, `usuario`, `texto`.
- **MÃ©todo `__init__`**: Constructor para inicializar los datos.
- **MÃ©todo `__str__`**: Para imprimirlo bonito (ej. `"[Sofi ğŸŒ¸]: Oigan..."`).
- **Propiedad Extra**: Un mÃ©todo o propiedad `es_multimedia(self)` que devuelva `True` si el texto es `"<Multimedia omitido>"` (o similar, dependiendo del idioma de tu cel).

```python
class Mensaje:
    def __init__(self, fecha, hora, usuario, texto):
        # Tu cÃ³digo aquÃ­
        pass

    def __str__(self):
        # Tu cÃ³digo aquÃ­
        pass
```

---

## Parte 3: El Arte del Parsing (Regex) ğŸ•µï¸â€â™€ï¸

Para convertir las lÃ­neas de texto en objetos `Mensaje`, necesitamos una ExpresiÃ³n Regular.

El patrÃ³n debe capturar:

1. La fecha y hora (lo que estÃ¡ entre corchetes).
2. El nombre del usuario (lo que estÃ¡ antes de los dos puntos).
3. El contenido del mensaje.

### Ejercicio 2: DiseÃ±a tu Regex

Prueba con algo como esto (ajÃºstalo segÃºn tus necesidades):

```python
import re

linea = "[24/12/23, 8:00:00 p.m.] Sofi ğŸŒ¸: Oigan, Â¿a quÃ© hora llegan?"
# Pista: r"\[(.*?)\] (.*?): (.*)"
# Usa re.match() y .groups()
```

---

## Parte 4: La Clase `AnalizadorDeChat` ğŸ“Š

Esta clase serÃ¡ el cerebro de la operaciÃ³n.

### Ejercicio 3: ImplementaciÃ³n

```python
class AnalizadorDeChat:
    def __init__(self):
        self.mensajes = []  # Lista para guardar objetos Mensaje

    def cargar_archivo(self, ruta_archivo):
        """
        Lee el archivo lÃ­nea por lÃ­nea.
        Usa regex para extraer datos.
        Crea objetos Mensaje y los agrega a self.mensajes.
        """
        # Tu cÃ³digo aquÃ­
        pass

    def contar_mensajes_por_usuario(self):
        """
        Devuelve un diccionario con {usuario: cantidad_mensajes}
        """
        # Tu cÃ³digo aquÃ­
        pass

    def encontrar_usuario_mas_intenso(self):
        """
        Devuelve el nombre del usuario con mÃ¡s mensajes.
        """
        # Tu cÃ³digo aquÃ­
        pass
```

---

## Parte 5: EjecuciÃ³n y Reporte ğŸ“ˆ

Crea un archivo `chat_falso.txt` con los datos de ejemplo de la Parte 1 (o usa uno real tuyo si te atreves).

### Ejercicio 4: El Script Principal

1. Instancia el `AnalizadorDeChat`.
2. Carga el archivo.
3. Imprime quiÃ©n mandÃ³ mÃ¡s mensajes.
4. **Bonus**: Guarda las estadÃ­sticas en un archivo JSON llamado `reporte_chisme.json`.

```python
import json

analizador = AnalizadorDeChat()
analizador.cargar_archivo("chat_falso.txt")
stats = analizador.contar_mensajes_por_usuario()

print("Resultados del Chisme:")
for user, count in stats.items():
    print(f"{user}: {count} mensajes")

# Guardar JSON
with open("reporte_chisme.json", "w", encoding="utf-8") as f:
    json.dump(stats, f, ensure_ascii=False, indent=4)
```

---

## ReflexiÃ³n (DiscusiÃ³n con LLM) ğŸ¤–

PregÃºntale a tu asistente:

- *"Â¿CÃ³mo manejarÃ­as los mensajes que ocupan mÃºltiples lÃ­neas (saltos de lÃ­nea en WhatsApp)?"* (Este es un problema real de parsing).
- *"Â¿QuÃ© implicaciones Ã©ticas tiene analizar chats privados, incluso si tienes el archivo?"*
- *"Â¿CÃ³mo podrÃ­amos detectar 'sentimientos' en los mensajes usando una librerÃ­a simple?"*
